#!/usr/bin/env bash

# SPDX-License-Identifier: BSD-3-Clause
# Copyright 2024-2025 <Nitrux Latinoamericana S.C. <hello@nxos.org>>


# -- Exit on errors.

set -eu


# -- Download setup file.

wget -q -O ~/.local/bin/itch-setup https://raw.githubusercontent.com/Nitrux/storage/master/Other/itch-setup


# -- Run setup.

notify-send -i "itch-io" "Installing itch.io, please wait..." 

chmod +x ~/.local/bin/itch-setup && sh ~/.local/bin/./itch-setup

notify-send -i "itch-io" "Installation complete." 


# -- Check if itch.io is installed an delete install script.

notify-send -i "itch-io" "Launching itch.io." 

if [ -d "$HOME/.itch" ];
    then
         rm -f "$HOME/.local/bin/itch-setup"
         rm -f "$HOME/.local/bin/install-itch-io"
         rm -f "$HOME/.local/share/applications/install.itch.io.desktop"
fi

exit
